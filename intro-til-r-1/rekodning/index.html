<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.96.0"><meta name=description content><link rel=icon href=../../images/favicon.png type=image/png><title>Rekodning og nye variable :: 4. Semester - Introduktion til kvantitativ metode</title><link href=../../css/nucleus.css?1648560588 rel=stylesheet><link href=../../css/fontawesome-all.min.css?1648560588 rel=stylesheet><link href=../../css/hybrid.css?1648560588 rel=stylesheet><link href=../../css/featherlight.min.css?1648560588 rel=stylesheet><link href=../../css/perfect-scrollbar.min.css?1648560588 rel=stylesheet><link href=../../css/auto-complete.css?1648560588 rel=stylesheet><link href=../../css/atom-one-dark-reasonable.css?1648560588 rel=stylesheet><link href=../../css/theme.css?1648560588 rel=stylesheet><link href=../../css/tabs.css?1648560588 rel=stylesheet><link href=../../css/hugo-theme.css?1648560588 rel=stylesheet><link href=../../css/theme-custom.css?1648560588 rel=stylesheet><script src=../../js/jquery-3.3.1.min.js?1648560588></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style></head><body data-url=../../intro-til-r-1/rekodning/><nav id=sidebar><div id=header-wrapper><div id=header><a href=/4semesterR/><img src=https://www.design.aau.dk/digitalAssets/888/888352_aau_center_white.png width=75 height=75 alt=logo></a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=../../js/lunr.min.js?1648560588></script>
<script type=text/javascript src=../../js/auto-complete.js?1648560588></script>
<script type=text/javascript>var baseurl=""</script><script type=text/javascript src=../../js/search.js?1648560588></script></div><section id=homelinks><ul><li><a class=padding href=../../><i class="fas fa-home"></i> Home</a></li></ul></section><div class=highlightable><ul class=topics><li data-nav-id=/velkommen/ title="Velkommen på 4. semester" class=dd-item><a href=../../velkommen/>Velkommen på 4. semester</a><ul><li data-nav-id=/velkommen/indhold/ title=Indhold class=dd-item><a href=../../velkommen/indhold/>Indhold</a></li><li data-nav-id=/velkommen/l%C3%A6ringsm%C3%A5l/ title=Læringsmål class=dd-item><a href=../../velkommen/l%C3%A6ringsm%C3%A5l/>Læringsmål</a></li><li data-nav-id=/velkommen/viden/ title=Viden class=dd-item><a href=../../velkommen/viden/>Viden</a></li><li data-nav-id=/velkommen/f%C3%A6rdigheder/ title=Færdigheder class=dd-item><a href=../../velkommen/f%C3%A6rdigheder/>Færdigheder</a></li><li data-nav-id=/velkommen/kompetencer/ title=Kompetencer class=dd-item><a href=../../velkommen/kompetencer/>Kompetencer</a></li></ul></li><li data-nav-id=/ops%C3%A6tning-af-r/ title="Opsætning og installation af R" class=dd-item><a href=../../ops%C3%A6tning-af-r/>Opsætning og installation af R</a><ul><li data-nav-id=/ops%C3%A6tning-af-r/inst_win/ title="Installation på Windows" class=dd-item><a href=../../ops%C3%A6tning-af-r/inst_win/>Installation på Windows</a></li><li data-nav-id=/ops%C3%A6tning-af-r/inst_mac/ title="Installation på Mac" class=dd-item><a href=../../ops%C3%A6tning-af-r/inst_mac/>Installation på Mac</a></li></ul></li><li data-nav-id=/pakker-og-rstudio/ title="Basisfunktionerne i R" class=dd-item><a href=../../pakker-og-rstudio/>Basisfunktionerne i R</a><ul><li data-nav-id=/pakker-og-rstudio/visuelr1/ title="Visuel beskrivelse af RStudio 1" class=dd-item><a href=../../pakker-og-rstudio/visuelr1/>Visuel beskrivelse af RStudio 1</a></li><li data-nav-id=/pakker-og-rstudio/visuelr2/ title="Visuel beskrivelse af RStudio 2" class=dd-item><a href=../../pakker-og-rstudio/visuelr2/>Visuel beskrivelse af RStudio 2</a></li><li data-nav-id=/pakker-og-rstudio/pakker/ title=Pakker class=dd-item><a href=../../pakker-og-rstudio/pakker/>Pakker</a></li></ul></li><li data-nav-id=/introduktion-t.-kvant.-t%C3%A6nkem%C3%A5de/ title="Intro til kvant. tænkemåde" class=dd-item><a href=../../introduktion-t.-kvant.-t%C3%A6nkem%C3%A5de/>Intro til kvant. tænkemåde</a><ul><li data-nav-id=/introduktion-t.-kvant.-t%C3%A6nkem%C3%A5de/intro_kvant_taenke/ title="Intro til kvant." class=dd-item><a href=../../introduktion-t.-kvant.-t%C3%A6nkem%C3%A5de/intro_kvant_taenke/>Intro til kvant.</a></li></ul></li><li data-nav-id=/m%C3%A5leniveau/ title="Måleniveau mm." class=dd-item><a href=../../m%C3%A5leniveau/>Måleniveau mm.</a><ul><li data-nav-id=/m%C3%A5leniveau/m%C3%A5leniveau_intro/ title="Måleniveau intro" class=dd-item><a href=../../m%C3%A5leniveau/m%C3%A5leniveau_intro/>Måleniveau intro</a></li></ul></li><li data-nav-id=/sandsynligheder/ title="Sandsynlighed mm." class=dd-item><a href=../../sandsynligheder/>Sandsynlighed mm.</a><ul><li data-nav-id=/sandsynligheder/sandsynligheder_intro/ title="Sandsynligheder intro" class=dd-item><a href=../../sandsynligheder/sandsynligheder_intro/>Sandsynligheder intro</a></li></ul></li><li data-nav-id=/intro-til-r-1/ title="Intro til R 1" class="dd-item
parent"><a href=../../intro-til-r-1/>Intro til R 1</a><ul><li data-nav-id=/intro-til-r-1/hvad-er-r/ title="Hvad er R?" class=dd-item><a href=../../intro-til-r-1/hvad-er-r/>Hvad er R?</a></li><li data-nav-id=/intro-til-r-1/r-sproget_objekter/ title="R Sproget: Objekter" class=dd-item><a href=../../intro-til-r-1/r-sproget_objekter/>R Sproget: Objekter</a></li><li data-nav-id=/intro-til-r-1/r-sproget-_funktioner/ title="R Sproget: Funktioner" class=dd-item><a href=../../intro-til-r-1/r-sproget-_funktioner/>R Sproget: Funktioner</a></li><li data-nav-id=/intro-til-r-1/tabeldata-r/ title="Tabeldata i R" class=dd-item><a href=../../intro-til-r-1/tabeldata-r/>Tabeldata i R</a></li><li data-nav-id=/intro-til-r-1/enkeltvariable/ title="Enkeltvariable (vectors)" class=dd-item><a href=../../intro-til-r-1/enkeltvariable/>Enkeltvariable (vectors)</a></li><li data-nav-id=/intro-til-r-1/missingv%C3%A6rdier/ title=Missing-værdier class=dd-item><a href=../../intro-til-r-1/missingv%C3%A6rdier/>Missing-værdier</a></li><li data-nav-id=/intro-til-r-1/subsetting/ title="Datahåndtering i R: Subsetting" class=dd-item><a href=../../intro-til-r-1/subsetting/>Datahåndtering i R: Subsetting</a></li><li data-nav-id=/intro-til-r-1/rekodning/ title="Rekodning og nye variable" class="dd-item active"><a href=../../intro-til-r-1/rekodning/>Rekodning og nye variable</a></li><li data-nav-id=/intro-til-r-1/gem/ title="Gem dit arbejde" class=dd-item><a href=../../intro-til-r-1/gem/>Gem dit arbejde</a></li><li data-nav-id=/intro-til-r-1/%C3%B8velser/ title="Øvelser til undervisningsgangen" class=dd-item><a href=../../intro-til-r-1/%C3%B8velser/>Øvelser til undervisningsgangen</a></li></ul></li><li data-nav-id=/punkt-og-intervalestimation/ title="Punkt- og intervalestimation" class=dd-item><a href=../../punkt-og-intervalestimation/>Punkt- og intervalestimation</a><ul><li data-nav-id=/punkt-og-intervalestimation/punkt-og-intervalestimation/ title="Punkt- og intervalestimation" class=dd-item><a href=../../punkt-og-intervalestimation/punkt-og-intervalestimation/>Punkt- og intervalestimation</a></li></ul></li><li data-nav-id=/hypoteseteori/ title=Hypoteseteori class=dd-item><a href=../../hypoteseteori/>Hypoteseteori</a><ul><li data-nav-id=/hypoteseteori/hypoteseteori/ title=Hypoteseteori class=dd-item><a href=../../hypoteseteori/hypoteseteori/>Hypoteseteori</a></li></ul></li><li data-nav-id=/krydstabeller/ title=Krydstabeller class=dd-item><a href=../../krydstabeller/>Krydstabeller</a><ul><li data-nav-id=/krydstabeller/krydstabeller/ title=Krydstabeller class=dd-item><a href=../../krydstabeller/krydstabeller/>Krydstabeller</a></li></ul></li><li data-nav-id=/korrelationer/ title=Korrelationer class=dd-item><a href=../../korrelationer/>Korrelationer</a><ul><li data-nav-id=/korrelationer/korrelationer/ title=Korrelationer class=dd-item><a href=../../korrelationer/korrelationer/>Korrelationer</a></li></ul></li><li data-nav-id=/intro-til-r-2/ title="Intro til R 2" class=dd-item><a href=../../intro-til-r-2/>Intro til R 2</a><ul><li data-nav-id=/intro-til-r-2/enkeltvariable/ title="Enkeltvariable (vectors)" class=dd-item><a href=../../intro-til-r-2/enkeltvariable/>Enkeltvariable (vectors)</a></li></ul></li></ul><section id=footer><p>Built with <a href=https://github.com/matcornic/hugo-theme-learn><i class="fas fa-heart"></i></a> from <a href=https://getgrav.org>Grav</a> and <a href=https://gohugo.io/>Hugo</a></p></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i></a></span>
<span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links><a href=../../>Velkommen på 4. semester</a> > <a href=../../intro-til-r-1/>Intro til R 1</a> > Rekodning og nye variable</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#rekodning-samt-at-danne-nye-variable>Rekodning samt at danne nye variable</a><ul><li><a href=#rekodning-samt-at-danne-nye-variable-med-dplyr>Rekodning samt at danne nye variable med <code>dplyr</code></a></li></ul></li><li><a href=#classes-i-r>&ldquo;Classes&rdquo; i R</a><ul><li><a href=#class-coercion---tving-en-variabel-til-en-anden-type>&ldquo;Class coercion&rdquo; - tving en variabel til en anden type</a></li></ul></li></ul></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>Rekodning og nye variable</h1><h2 id=rekodning-samt-at-danne-nye-variable>Rekodning samt at danne nye variable</h2><p>At lave nye variable og (simple) rekodninger er typisk gjort på samme måde. Den eneste forskel er blot, om ændringerne skrives til ny variabel, eller om ændringerne overskriver en eksisterende variabel (rekodning).</p><p>(I dag ser vi kun på rekodning som &ldquo;omregninger&rdquo; af eksisterende variable. Næste gang ser vi på rekodning af kategorier).</p><h3 id=rekodning-samt-at-danne-nye-variable-med-dplyr>Rekodning samt at danne nye variable med <code>dplyr</code></h3><p>Funktionen <code>mutate()</code> i <code>dplyr</code> bruges til at rekode samt til at danne nye variable:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-R data-lang=R><span style=display:flex><span>ess18 <span style=color:#f92672>&lt;-</span> <span style=color:#a6e22e>mutate</span>(ess18, inwth <span style=color:#f92672>=</span> inwtm <span style=color:#f92672>/</span> <span style=color:#ae81ff>60</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>head</span>(ess18<span style=color:#f92672>$</span>inwth)
</span></span></code></pre></div><style>.list-inline{list-style:none;margin:0;padding:0}.list-inline>li{display:inline-block}.list-inline>li:not(:last-child)::after{content:"\00b7";padding:0 .5ex}</style><ol class=list-inline><li>1.01666666666667</li><li>1.13333333333333</li><li>1.48333333333333</li><li>0.833333333333333</li><li>1.28333333333333</li><li>0.8</li></ol><h2 id=classes-i-r>&ldquo;Classes&rdquo; i R</h2><p>Som nævnt tidligere, adskiller R mellem objekter via deres &ldquo;class&rdquo;.</p><p>Funktionen <code>class()</code> bruges til at tjekke hvilken &ldquo;class&rdquo; objektet har:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-R data-lang=R><span style=display:flex><span>name <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;keenan&#34;</span>
</span></span><span style=display:flex><span>year <span style=color:#f92672>=</span> <span style=color:#ae81ff>1964</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-R data-lang=R><span style=display:flex><span><span style=color:#a6e22e>class</span>(name)
</span></span></code></pre></div><pre><code>'character'
</code></pre><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-R data-lang=R><span style=display:flex><span><span style=color:#a6e22e>class</span>(year)
</span></span></code></pre></div><pre><code>'numeric'
</code></pre><p>Enkelte variable(/&ldquo;vectors&rdquo;) kan <em>kun</em> indeholde værdier med samme class. Funktionen <code>class()</code> virker derfor også på variable.</p><p>Variablen <code>tygrtr</code> (i hvilken alder er man for ung til at gå på pension) ligner en variabel, der bør indeholde numeriske værdier (en alder). Ser vi nærmere på variablen, kan vi dog se, at den også indeholder tekst-værdier:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-R data-lang=R><span style=display:flex><span><span style=color:#a6e22e>head</span>(ess18<span style=color:#f92672>$</span>tygrtr)
</span></span></code></pre></div><style>.list-inline{list-style:none;margin:0;padding:0}.list-inline>li{display:inline-block}.list-inline>li:not(:last-child)::after{content:"\00b7";padding:0 .5ex}</style><ol class=list-inline><li>'60'</li><li>'40'</li><li>'55'</li><li>'64'</li><li>'50'</li><li>'60'</li></ol><p>Undersøger vi variablens &ldquo;class&rdquo;, kan vi se, at variablen er lagret som tekst (også kaldt &ldquo;string&rdquo; i programmeringssprog):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-R data-lang=R><span style=display:flex><span><span style=color:#a6e22e>class</span>(ess18<span style=color:#f92672>$</span>tygrtr)
</span></span></code></pre></div><pre><code>'character'
</code></pre><p>Dette betyder at vi ikke kan lave beregninger med variablen:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-R data-lang=R><span style=display:flex><span><span style=color:#a6e22e>max</span>(ess18<span style=color:#f92672>$</span>tygrtr, na.rm <span style=color:#f92672>=</span> <span style=color:#66d9ef>TRUE</span>) <span style=color:#75715e># Viser højeste værdi alfabetisk</span>
</span></span></code></pre></div><pre><code>'Should never retire permanently'
</code></pre><h3 id=class-coercion---tving-en-variabel-til-en-anden-type>&ldquo;Class coercion&rdquo; - tving en variabel til en anden type</h3><p>I de fleste tilfælde kan R tvinge værdier fra en type/class til en anden. Ved at gøre dette, bliver inkompatible værdier til missing (<code>NA</code>).</p><p>Værdier kan tvinges til tekst værdier med <code>as.character()</code></p><p>Værdier kan tvinges til numeriske værdier med <code>as.numeric()</code></p><p>Herunder dannes en numerisk version af <code>tygrtr</code> (bemærk advarslen):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-R data-lang=R><span style=display:flex><span>ess18 <span style=color:#f92672>&lt;-</span> <span style=color:#a6e22e>mutate</span>(ess18, tygrtr_num <span style=color:#f92672>=</span> <span style=color:#a6e22e>as.numeric</span>(tygrtr))
</span></span></code></pre></div><pre><code>Warning message in mask$eval_all_mutate(quo):
&quot;NAs introduced by coercion&quot;
</code></pre><p>Nu kan variablen bruges i beregninger:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-R data-lang=R><span style=display:flex><span><span style=color:#a6e22e>max</span>(ess18<span style=color:#f92672>$</span>tygrtr_num, na.rm <span style=color:#f92672>=</span> <span style=color:#66d9ef>TRUE</span>)
</span></span></code></pre></div><pre><code>88</code></pre><footer class=footline></footer></div></div><div id=navigation><a class="nav nav-prev" href=../../intro-til-r-1/subsetting/ title="Datahåndtering i R: Subsetting"><i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=../../intro-til-r-1/gem/ title="Gem dit arbejde" style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=../../js/clipboard.min.js?1648560588></script>
<script src=../../js/perfect-scrollbar.min.js?1648560588></script>
<script src=../../js/perfect-scrollbar.jquery.min.js?1648560588></script>
<script src=../../js/jquery.sticky.js?1648560588></script>
<script src=../../js/featherlight.min.js?1648560588></script>
<script src=../../js/highlight.pack.js?1648560588></script>
<script>hljs.initHighlightingOnLoad()</script><script src=../../js/modernizr.custom-3.6.0.js?1648560588></script>
<script src=../../js/learn.js?1648560588></script>
<script src=../../js/hugo-learn.js?1648560588></script>
<script src=../../mermaid/mermaid.js?1648560588></script>
<script>mermaid.initialize({startOnLoad:!0})</script></body></html>